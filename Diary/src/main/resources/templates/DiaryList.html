<!DOCTYPE html>
<html lang="en">
<head>
    <!-- generated by rstdiary : https://github.com/ianw/rstdiary -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script defer src="https://use.fontawesome.com/releases/v5.13.0/js/all.js" integrity="sha384-ujbKXb9V3HdK7jcWL6kHL1c+2Lj4MR4Gkjl7UtwpSHg/ClpViddK9TI7yU53frPN" crossorigin="anonymous"></script>

    <link href='/fullcalendar-5.11.5/lib/main.css' rel='stylesheet' />
    <script src='/fullcalendar-5.11.5/lib/main.js'></script>
    <script src="/js/Diary.js"></script>
    <script src="/js/token.js"></script>
    <link rel="stylesheet" href="/js/style.css" />
    <title> My Diary List </title>

    <style>
        /*
         * Globals
         */

        body {
            padding-top: 70px;
            background: #efefef
        }

        h1, .h1,
        h2, .h2,
        h3, .h3,
        h4, .h4,
        h5, .h5,
        h6, .h6 {
            margin-top: 0;
            font-weight: normal;
            color: #333;
        }


        /*
         * Main column and sidebar layout
         */

        .blog-main {
            line-height: 1.5;
        }

        /* Sidebar modules for boxing content */
        .sidebar-module {
            box-shadow: 0 2px 10px 0 rgba(0, 0, 0, 0.16);
            background: #fff;
            padding: 15px;
            margin: 0 -15px 15px;
            border-radius: 4px;
        }
        .sidebar-module-inset {
            padding: 15px;
            background-color: #f5f5f5;
            border-radius: 4px;
        }
        .sidebar-module-inset p:last-child,
        .sidebar-module-inset ul:last-child,
        .sidebar-module-inset ol:last-child {
            margin-bottom: 0;
        }

        /*
         * Blog posts
         */
        .blog-post {
            margin-bottom: 20px;
            box-shadow: 0 2px 10px 0 rgba(0, 0, 0, 0.16);
            border-radius: 4px;
            padding: 15px;
            background: #fff;
        }

        .blog-first h2 {
            color: #3f51b5;
        }

        .blog-post h2 small {
            color: rgb(119, 119, 119);
        }

        /*
         * todo
         */
        .todo-entry {
            margin-bottom: 20px;
            box-shadow: 0 2px 10px 0 rgba(0, 0, 0, 0.16);
            border-radius: 4px;
            padding: 15px;
            background: #F0FFFF;
        }

        /*
         * Footer
         */

        .blog-footer {
            padding: 10px 0;
            color: #999;
            text-align: center;
            background-color: #f9f9f9;
            border-top: 1px solid #e5e5e5;
        }
        .blog-footer p:last-child {
            margin-bottom: 0;
        }
    </style>

</head>

<body>

<div class="navbar navbar-light bg-light fixed-top navbar-expand-md">
    <div class="container">
        <a class="navbar-brand" href="#">■ My Diary ■ </a>
    </div>
</div>

<div class="container">

    <h1>My Diary Lists </h1>
    <button type="button" id="create-btn"
            th:onclick="|location.href='@{/new-diary}'|"
            class="btn btn-secondary btn-sm mb-3">글 등록</button>
    <button type="button" class="btn btn-secondary" onclick="location.href='/logout'">로그아웃</button>
    <div class="row">
        <div class="col-md-8 blog-main">

                <div class="blog-post" th:each="item:${diaries}" >
                    <div class="blog-post todo-entry" id="{{entry.anchor}}">
                        <div th:text="${item.id}"></div>
                        <div >
                            <a th:href="@{/diaries/{id}(id=${item.id})}"><h5 th:text="${item.title}"></h5></a>
                            <p th:text="${item.content}"></p>
                            <a class="float-end " href="#{{entry.anchor}}">
                                <i class="fas fa-bookmark"></i>
                            </a>
                        </div>
                    </div>
                </div>
        </div>

        <div class="col-md-3 offset-sm-1">
           <!-- <div class="sidebar-module sidebar-module-inset">
                <h4>About</h4>
                <p>{{ about|safe }}</p>
            </div>
-->
            <div class="sidebar-module">
                <h4>STEP BACKKKKK</h4>
                <ul class="list-group list-group-flush">
                    Boom, bitch, <br> you don't want this <br>
                    I'ma pull up with the glick, <br> pussy wanna talk shit, like <br>
                    Every motherfucker wanna <br> talk about another <br>
                    But they never wanna be the <br> one to pull up the numbers <br>
                    See me doin' good, <br> now they wanna say, "I said so" <br>
                    Tell me why they never gave <br> a minute from the get-go <br>
                    Tell me why they never wanna <br> motherfuckin' let go <br>
                    Tell me why my legacy is  <br>'bout to be in set stone <br>
                </ul>
            </div>

        </div>

    </div><!-- /.row -->
    <script>

        document.addEventListener('DOMContentLoaded', function() {
            var calendarEl = document.getElementById('calendar');
            var calendar = new FullCalendar.Calendar(calendarEl, {
                headerToolbar: {
                    left: 'prevYear,prev,next,nextYear today',
                    center: 'title', // 중앙에 제목 표시
                    right: 'dayGridMonth,timeGridWeek,timeGridDay'
                },
                title: function(info) {
                    return info.date.toLocaleDateString('ko-KR', { year: 'numeric', month: 'long' });
                },
                selectable: true,
                selectMirror: true,
                navLinks: true,
                editable: true,
                initialView: 'dayGridMonth',
                weekends: true,
                dayMaxEvents: true,
                dateClick: function(info) {
                    var date = info.dateStr;
                    window.open('http://localhost:8080/new-diary?date=' + date, '_self');
                },
                dateClick: function(info) {
                    var date = info.dateStr;
                    // 데이터를 가져오기 위한 AJAX 요청
                    fetch('/get-diary?date=' + date)
                        .then(response => response.json())
                        .then(data => {
                            // 가져온 데이터로 제목과 내용 필드 업데이트
                            document.getElementById('title').value = data.title;
                            document.getElementById('content').value = data.content;
                        })
                        .catch(error => console.error('데이터를 불러오는 중 오류 발생:', error));
                },

                events: 'http://localhost:8080/api/diaries'
            });
            calendar.render();
        });


    </script>

    <h1>MyCalendar</h1>
    <div id='calendar'></div>
</div>

</body>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

</html>